# EPUB/PDF轉換器網頁版使用指南

## 🌟 新功能概覽

這個升級版的轉換器現在是一個功能強大的網頁應用程式，具備以下新功能：

### ✨ 主要新增功能
1. **簡體轉正體中文**：自動檢測並轉換簡體中文為正體中文
2. **PDF支援**：支援PDF檔案作為輸入格式
3. **行距調整**：可自由調整文字行距（1.0-3.0倍）
4. **Markdown輸出**：生成適合Obsidian的階層化Markdown格式
5. **網頁介面**：現代化的拖拽上傳網頁介面

## 🚀 快速開始

### 啟動應用程式

```bash
# 方法1：使用啟動腳本（推薦）
./run_web.sh

# 方法2：手動啟動
source venv/bin/activate
python app.py
```

### 訪問網頁介面

啟動後，在瀏覽器中訪問：
- 本地訪問：http://localhost:5001
- 網路訪問：http://你的IP:5001

## 📱 使用步驟

### 步驟1：上傳檔案

1. **拖拽上傳**：
   - 直接將EPUB或PDF檔案拖拽到上傳區域
   - 支援的格式：`.epub`、`.pdf`
   - 最大檔案大小：100MB

2. **點擊上傳**：
   - 點擊「選擇檔案」按鈕
   - 從檔案瀏覽器中選擇檔案

3. **檔案驗證**：
   - 系統會自動檢測檔案類型
   - 顯示檔案資訊（名稱、大小、類型）

### 步驟2：設定轉換選項

#### 行距設定
- 使用滑桿調整行距（1.0-3.0倍）
- 建議值：1.4-2.0
- 即時顯示當前設定值

#### 簡繁轉換
- ✅ **啟用**：自動檢測並轉換簡體中文
- ❌ **停用**：保持原始文字不變

#### 輸出格式選擇

**EPUB格式**：
- 適用於：EPUB輸入檔案
- 輸出：修改後的EPUB檔案
- 特點：保持電子書格式，支援各種閱讀器

**Markdown格式**：
- 適用於：EPUB和PDF輸入檔案
- 輸出：ZIP壓縮包，包含多個Markdown檔案
- 特點：
  - 階層化結構
  - 適合Obsidian導入
  - 包含主索引檔案
  - 章節間互相連結

### 步驟3：開始轉換

1. 點擊「開始轉換」按鈕
2. 等待處理完成（顯示進度條）
3. 查看轉換結果和統計資訊

### 步驟4：下載結果

1. 點擊「下載檔案」按鈕
2. 檔案會自動下載到瀏覽器預設下載位置

## 📊 轉換結果說明

### EPUB轉換結果
- **書籍資訊**：標題、作者、語言
- **簡繁轉換統計**：
  - 是否檢測到簡體中文
  - 是否執行了轉換
  - 轉換字符數和比例

### PDF轉換結果
- **文件資訊**：標題、作者、頁數
- **生成檔案**：Markdown檔案數量
- **章節結構**：自動檢測的章節劃分

### Markdown輸出結構
```
輸出檔案.zip
├── 主索引.md          # 書籍/文件總覽
├── 01_第一章.md       # 各章節內容
├── 02_第二章.md
└── ...
```

## 🔧 進階功能

### 簡繁轉換詳細說明

**自動檢測機制**：
- 檢測常見簡體字特徵
- 分析文字內容比例
- 智能判斷是否需要轉換

**轉換範圍**：
- HTML內容中的所有文字
- 保持HTML標籤結構不變
- 處理標題、段落、列表等元素

**統計資訊**：
- 總字符數
- 轉換字符數
- 轉換比例百分比

### PDF處理特點

**文字提取**：
- 使用PyMuPDF進行高品質文字提取
- 保持段落結構
- 識別標題和正文

**章節檢測**：
- 自動識別章節標題
- 支援多種標題格式
- 生成階層化結構

### Obsidian整合

**檔案結構**：
- 主索引檔案包含完整目錄
- 各章節檔案獨立存在
- 使用Wiki連結互相引用

**樣式設定**：
- 內嵌行距CSS
- 支援自定義樣式
- 保持Obsidian相容性

## 🛠️ 故障排除

### 常見問題

**Q: 上傳檔案失敗**
A: 檢查檔案格式和大小限制，確保網路連接正常

**Q: 簡繁轉換不工作**
A: OpenCC庫可能未正確安裝，檢查系統狀態區域的提示

**Q: PDF轉換效果不佳**
A: PDF檔案可能包含圖片或特殊格式，建議使用文字型PDF

**Q: 下載檔案失敗**
A: 檢查瀏覽器下載設定，確保有足夠的磁碟空間

### 系統狀態檢查

網頁底部的「系統狀態」區域顯示：
- 簡繁轉換功能狀態
- PDF處理功能狀態
- 檔案大小限制

### 效能優化建議

1. **檔案大小**：建議單個檔案不超過50MB
2. **瀏覽器**：使用Chrome或Firefox獲得最佳體驗
3. **網路**：確保穩定的網路連接
4. **記憶體**：處理大檔案時確保足夠的系統記憶體

## 📝 測試檔案

專案包含兩個測試檔案：

1. **test_vertical_book.epub**：正體中文直向閱讀測試檔案
2. **test_simplified_chinese_book.epub**：簡體中文測試檔案

可以使用這些檔案測試轉換功能。

## 🔄 版本更新

### v2.0.0 (網頁版)
- 新增網頁介面
- 支援PDF輸入
- 簡體轉正體功能
- Markdown輸出格式
- 行距調整功能
- 拖拽上傳支援

### v1.0.0 (桌面版)
- 基本EPUB轉換功能
- 直向轉橫向閱讀
- 字型更改
- GUI介面

## 📞 技術支援

如遇到問題，請提供：
- 瀏覽器類型和版本
- 輸入檔案資訊
- 錯誤訊息截圖
- 操作步驟描述
